From 7574583adc7fac6cd121cb27eee04e5143d93bd7 Mon Sep 17 00:00:00 2001
From: Alec Leamas <leamas.alec@nowhere.nt>
Date: Sat, 13 Mar 2021 22:02:43 +0100
Subject: [PATCH] isCompatible: More debug output.

---
 src/PluginHandler.cpp | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/src/PluginHandler.cpp b/src/PluginHandler.cpp
index 532c40262..6e0cdb01a 100644
--- a/src/PluginHandler.cpp
+++ b/src/PluginHandler.cpp
@@ -208,6 +208,9 @@ bool PluginHandler::isCompatible(const PluginMetadata& metadata,
     }
     compatOS = ocpn::tolower(compatOS);
     compatOsVersion = ocpn::tolower(compatOsVersion);
+    DEBUG_LOG << "isCompatible, start: "
+        << "plugin arch: " << metadata.target_arch.c_str()
+        << " host arch: " << ocpn::tolower(os_detail->osd_arch.c_str());
     
     //  Compare to the required values in the metadata
     std::string plugin_os = ocpn::tolower(metadata.target);
@@ -225,8 +228,9 @@ bool PluginHandler::isCompatible(const PluginMetadata& metadata,
     //  For linux variants....
     // If the plugin architecture is defined, we can eliminate incompatible plugins immediately
     if(metadata.target_arch.size()){
-        if(ocpn::tolower(metadata.target_arch) != ocpn::tolower(os_detail->osd_arch))
+        if(ocpn::tolower(metadata.target_arch) != ocpn::tolower(os_detail->osd_arch)) {
             return false;
+        }
     }
 
     std::string compatOS_ARCH = compatOS + "-" + ocpn::tolower(os_detail->osd_arch);
-- 
2.29.2

