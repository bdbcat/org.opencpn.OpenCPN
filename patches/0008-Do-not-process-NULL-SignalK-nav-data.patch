From: transmitterdan <transmitterdan@noisp.com>
Date: Sat, 29 Jan 2022 07:55:06 -0600
Subject: [PATCH] Do not process NULL SignalK nav data.

Bug:  https://github.com/OpenCPN/OpenCPN/issues/2750
Applied-upstream: https://github.com/OpenCPN/OpenCPN/commit/316ae930569
---
 src/SignalKEventHandler.cpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/SignalKEventHandler.cpp b/src/SignalKEventHandler.cpp
index bb1c0e7..57a6877 100644
--- a/src/SignalKEventHandler.cpp
+++ b/src/SignalKEventHandler.cpp
@@ -112,13 +112,13 @@ void SignalKEventHandler::updateItem(wxJSONValue &item,
   if (item.HasMember("path") && item.HasMember("value")) {
     const wxString &update_path = item["path"].AsString();
     wxJSONValue &value = item["value"];
-    if (update_path == _T("navigation.position")) {
+    if (update_path == _T("navigation.position") && !value.IsNull()) {
       updateNavigationPosition(value, sfixtime);
     } else if (update_path == _T("navigation.speedOverGround") &&
-               bGPSValid_SK) {
+               bGPSValid_SK && !value.IsNull()) {
       updateNavigationSpeedOverGround(value, sfixtime);
     } else if (update_path == _T("navigation.courseOverGroundTrue") &&
-               bGPSValid_SK) {
+               bGPSValid_SK && !value.IsNull()) {
       updateNavigationCourseOverGround(value, sfixtime);
     } else if (update_path == _T("navigation.courseOverGroundMagnetic")) {
     }  // Ignore magnetic COG as OpenCPN don't handle yet.
